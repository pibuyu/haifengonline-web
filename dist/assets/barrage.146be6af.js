import{d as A,r as a,o as I,N as k,U as C,E as H,a2 as M,a6 as T,A as Y,c,b as l,g as e,i as _,n as z,F as N,e as R,v as E,S as V,H as j,C as U,D as W,a as r,t as B,u as d,X,l as q}from"./index.0228ac47.js";import"./el-infinite-scroll.3c533531.js";/* empty css                 *//* empty css                        *//* empty css                  */import{_ as G}from"./pageHeader.3132b316.js";import{l as J}from"./contribution.36ea1e3c.js";import{y as m}from"./vue-ellipsis-3.es.74e51318.js";import"./index.f22c08f3.js";const b=n=>(U("data-v-a9449051"),n=n(),W(),n),K={class:"overall"},O={class:"content"},P=["infinite-scroll-disabled"],Q={class:"item-left"},Z={class:"avatar"},$={class:"info"},ee={class:"top"},te={class:"username"},se={class:"time"},ae={class:"comment-text"},oe=b(()=>e("div",{class:"comment-content"},"\u5F39\u5E55\u5185\u5BB9 : ",-1)),le={class:"item-right"},ne={class:"video-info"},ie={class:"title"},ce={class:"record-empty"},re={class:"load-more"},ue=b(()=>e("div",{class:"spread-bottom"},null,-1)),_e=A({__name:"barrage",setup(n){m;const o=a([]),v=a({page:1,size:9}),p=a(0),f=a(),i=a(!0),u=a(!1),h=a(!1),g=async()=>{try{const t=await J({page_info:v.value});if(!t.data)return!1;t.data.length==0&&(h.value=!0),o.value=[...o.value,...t.data],v.value.page++,console.log(t)}catch(t){console.log(t),V.fire({title:"\u52A0\u8F7D\u6570\u636E\u5931\u8D25",heightAuto:!1,confirmButtonColor:j.colorButtonTheme,icon:"error"})}},x=async()=>{if(i.value==!0||(u.value=!0,o.value.length<=0))return!1;await g(),u.value=!1};return I(async()=>{await g(),i.value=!1,k(()=>{p.value=document.documentElement.clientHeight-f.value.offsetTop+4})}),(t,de)=>{const D=G,S=C,w=H,F=M,y=T,L=Y;return r(),c("div",K,[l(D,{title:"\u5F39\u5E55\u7BA1\u7406","icon-nmae":"barrage",animate:!1,whiteWhale:!1}),e("div",O,[_((r(),c("div",{class:"comment-box","infinite-scroll-delay":1e3,"infinite-scroll-distance":40,"infinite-scroll-disabled":h.value,ref_key:"scrollRef",ref:f,"infinite-scroll-immediate":!1,style:z({height:p.value+"px"})},[(r(!0),c(N,null,R(o.value,s=>(r(),c("div",{class:"comment-item",key:s.id},[e("div",Q,[e("div",Z,[l(S,{size:52,src:s.photo},null,8,["src"])]),e("div",$,[e("div",ee,[e("div",te,[e("span",null,B(s.username),1)]),e("div",se,[e("span",null,B(d(X)(s.created_at).format("YYYY.MM.DD.hh.mm")),1)])]),e("div",ae,[oe,l(d(m),{visibleLine:1,text:s.comment},null,8,["text"])])])]),e("div",le,[e("div",ne,[l(w,{class:"item-img",src:s.cover,fit:"cover"},null,8,["src"]),e("div",ie,[l(d(m),{visibleLine:1,text:s.title},null,8,["text"])])])])]))),128)),_(e("div",ce,[l(F,{description:"\u8FD8\u6CA1\u6709\u5F39\u5E55,\u5FEB\u53BB\u4E92\u52A8~"})],512),[[E,o.value.length==0&&i.value==!1]]),_(e("div",re,null,512),[[E,o.value.length>0&&u.value],[y,!0]]),ue],12,P)),[[y,i.value],[L,x]])])])}}});const be=q(_e,[["__scopeId","data-v-a9449051"]]);export{be as default};
