import{d as w,r as s,o as k,N as T,i as v,a as p,c as h,F as V,e as Y,g as e,b as t,t as x,u as B,X as M,v as g,n as H,S as z,H as R,k as O,U as N,E as j,a2 as U,a6 as P,A as W,C as X,D as q,l as L,aS as Q,aT as Z,w as F}from"./index.0228ac47.js";/* empty css                    */import{_ as ee}from"./pageHeader.3132b316.js";import"./el-infinite-scroll.3c533531.js";/* empty css                 *//* empty css                        *//* empty css                  */import{m as te,n as se}from"./contribution.36ea1e3c.js";import{y as C}from"./vue-ellipsis-3.es.74e51318.js";import{u as oe}from"./comment.87a04c15.js";import"./index.f22c08f3.js";const G=l=>(X("data-v-e3be5178"),l=l(),q(),l),ae=["infinite-scroll-disabled"],ne={class:"item-left"},le={class:"avatar"},ie={class:"info"},ce={class:"top"},ue={class:"username"},re={class:"time"},_e={class:"comment-text"},de=G(()=>e("div",{class:"comment-content"},"\u8BC4\u8BBA\u5185\u5BB9 : ",-1)),me={class:"item-right"},ve={class:"video-info"},fe={class:"title"},pe={class:"record-empty"},he={class:"load-more"},ge=G(()=>e("div",{class:"spread-bottom"},null,-1)),Be=w({__name:"video",setup(l){const o=oe(),i=s([]),d=s({page:1,size:9}),f=s(0),a=s(),c=s(!0),m=s(!1),y=s(!1),b=async()=>{try{const n=await te({page_info:d.value});if(console.log("\u8BF7\u6C42\u89C6\u9891\u7684\u8BC4\u8BBA\u7684\u8FD4\u56DE\u7ED3\u679C",n),!n.data)return!1;n.data.length==0&&(y.value=!0),i.value=[...i.value,...n.data],d.value.page++}catch(n){console.log(n),z.fire({title:"\u52A0\u8F7D\u6570\u636E\u5931\u8D25",heightAuto:!1,confirmButtonColor:R.colorButtonTheme,icon:"error"})}},u=async()=>{if(c.value==!0||(m.value=!0,i.value.length<=0))return!1;await b(),m.value=!1},S=O(),$=(n,E)=>{o.highLightCommentId=E,S.push({name:"VideoShow",params:{id:n}})};return k(async()=>{await b(),c.value=!1,T(()=>{f.value=document.documentElement.clientHeight-a.value.offsetTop-20})}),(n,E)=>{const D=N,A=j,r=U,I=P,K=W;return v((p(),h("div",{class:"comment-box","infinite-scroll-distance":40,"infinite-scroll-disabled":y.value,"infinite-scroll-immediate":!1,ref_key:"scrollRef",ref:a,style:H({height:f.value+"px"})},[(p(!0),h(V,null,Y(i.value,_=>(p(),h("div",{class:"comment-item",key:_.id},[e("div",ne,[e("div",le,[t(D,{size:52,src:_.photo},null,8,["src"])]),e("div",ie,[e("div",ce,[e("div",ue,[e("span",null,x(_.username),1)]),e("div",re,[e("span",null,x(B(M)(_.created_at).format("YYYY.MM.DD.hh.mm")),1)])]),e("div",_e,[de,t(B(C),{visibleLine:1,text:_.comment,onClick:Ue=>$(_.videoId,_.comment_id),style:{cursor:"pointer"}},null,8,["text","onClick"])])])]),e("div",me,[e("div",ve,[t(A,{class:"item-img",src:_.cover,fit:"cover"},null,8,["src"]),e("div",fe,[t(B(C),{visibleLine:1,text:_.title},null,8,["text"])])])])]))),128)),v(e("div",pe,[t(r,{description:"\u8FD8\u672A\u53D1\u5E03\u89C6\u9891,\u5FEB\u53BB\u53D1\u5E03\u5427~"})],512),[[g,i.value.length==0&&c.value==!1]]),v(e("div",he,null,512),[[g,i.value.length>0&&m.value],[I,!0]]),ge],12,ae)),[[I,c.value],[K,u]])}}});const ye=L(Be,[["__scopeId","data-v-e3be5178"]]),J=l=>(X("data-v-a2fae4bf"),l=l(),q(),l),Ee=["infinite-scroll-disabled"],be={class:"item-left"},De={class:"avatar"},xe={class:"info"},Ce={class:"top"},$e={class:"username"},Ae={class:"time"},Fe={class:"comment-text"},we=J(()=>e("div",{class:"comment-content"},"\u8BC4\u8BBA\u5185\u5BB9 : ",-1)),Le={class:"item-right"},Se={class:"video-info"},Ie={class:"title"},ke={class:"record-empty"},Te={class:"record-empty"},Ve={class:"load-more"},Ye=J(()=>e("div",{class:"spread-bottom"},null,-1)),Me=w({__name:"article",setup(l){const o=s([]),i=s({page:1,size:9}),d=s(0),f=s(),a=s(!0),c=s(!1),m=s(!1),y=async()=>{try{const u=await se({page_info:i.value});if(console.log("\u8BF7\u6C42\u6587\u7AE0\u7684\u8BC4\u8BBA\u7684\u8FD4\u56DE\u7ED3\u679C",u),!u.data)return!1;u.data.length==0&&(m.value=!0),o.value=[...o.value,...u.data],i.value.page++}catch(u){console.log(u),z.fire({title:"\u52A0\u8F7D\u6570\u636E\u5931\u8D25",heightAuto:!1,confirmButtonColor:R.colorButtonTheme,icon:"error"})}},b=async()=>{if(a.value==!0||(c.value=!0,o.value.length<=0))return!1;await y(),c.value=!1};return k(async()=>{await y(),a.value=!1,T(()=>{d.value=document.documentElement.clientHeight-f.value.offsetTop-20})}),(u,S)=>{const $=N,n=j,E=U,D=P,A=W;return v((p(),h("div",{class:"comment-box","infinite-scroll-distance":40,"infinite-scroll-disabled":m.value,"infinite-scroll-immediate":!1,ref_key:"scrollRef",ref:f,style:H({height:d.value+"px"})},[(p(!0),h(V,null,Y(o.value,r=>v((p(),h("div",{class:"comment-item",key:r.id},[e("div",be,[e("div",De,[t($,{size:52,src:r.photo},null,8,["src"])]),e("div",xe,[e("div",Ce,[e("div",$e,[e("span",null,x(r.username),1)]),e("div",Ae,[e("span",null,x(B(M)(r.created_at).format("YYYY.MM.DD.hh.mm")),1)])]),e("div",Fe,[we,t(B(C),{visibleLine:1,text:r.comment},null,8,["text"])])])]),e("div",Le,[e("div",Se,[t(n,{class:"item-img",src:r.cover,fit:"cover"},null,8,["src"]),e("div",Ie,[t(B(C),{visibleLine:1,text:r.title},null,8,["text"])])])]),v(e("div",ke,[t(E,{description:"\u8FD8\u672A\u53D1\u5E03\u4E13\u680F,\u5FEB\u53BB\u53D1\u5E03\u5427~"})],512),[[g,o.value.length==0&&a.value==!1]])])),[[g,o.value.length>0]])),128)),v(e("div",Te,[t(E,{description:"\u8FD8\u672A\u53D1\u5E03\u4E13\u680F,\u5FEB\u53BB\u53D1\u5E03\u5427~"})],512),[[g,o.value.length==0&&a.value==!1]]),v(e("div",Ve,null,512),[[g,o.value.length>0&&c.value],[D,!0]]),Ye],12,Ee)),[[D,a.value],[A,b]])}}});const He=L(Me,[["__scopeId","data-v-a2fae4bf"]]),ze={class:"overall"},Re={class:"content"},Ne={class:"tabs"},je=w({__name:"comment",setup(l){const o=s("video");return(i,d)=>{const f=ee,a=Q,c=Z;return p(),h("div",ze,[t(f,{title:"\u8BC4\u8BBA\u7BA1\u7406","icon-nmae":"comment",animate:!1,whiteWhale:!1}),e("div",Re,[e("div",Ne,[t(c,{modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=m=>o.value=m),class:"demo-tabs"},{default:F(()=>[t(a,{label:"\u89C6\u9891\u8BC4\u8BBA",name:"video"},{default:F(()=>[t(ye)]),_:1}),t(a,{label:"\u4E13\u680F\u8BC4\u8BBA",name:"article"},{default:F(()=>[t(He)]),_:1})]),_:1},8,["modelValue"])])])])}}});const tt=L(je,[["__scopeId","data-v-d98b0442"]]);export{tt as default};
