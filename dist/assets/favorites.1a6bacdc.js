import{L as q,r as _,k as G,aU as J,S as m,H as h,d as Y,o as j,M as K,y as O,E as Q,J as W,a0 as X,a1 as Z,z as ee,a2 as te,ae as oe,c as C,b as l,i as k,v as x,u as p,g as t,F as se,e as le,n as ae,w as i,aR as ne,C as re,D as ie,a as y,t as S,G as w,Y as ue,l as ce}from"./index.0228ac47.js";/* empty css                   *//* empty css                 *//* empty css                         *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                  *//* empty css                        */import{_ as de}from"./pageHeader.3132b316.js";import{C as pe}from"./createFavorites.d52ea2f2.js";import{o as _e,p as me}from"./personal.ec4b42a6.js";/* empty css                     *//* empty css                 */import"./aliyun-oss-sdk.c5af02fd.js";import"./focus.de63bc5a.js";import"./commonality.2a0df1e0.js";import"./index.f22c08f3.js";import"./upload.8470b696.js";import"./validate.c9820062.js";/* empty css                                                                        */const fe=()=>{const o=q(),n=G(),s=J(),e=_(!1),u=_({}),f=_({});return{userStore:o,router:n,favoritesList:u,createCollectDialogShow:e,updataInfo:f,route:s}},ve=(o,n)=>{m.fire({heightAuto:!1,title:"\u786E\u8BA4\u5220\u9664\u8BE5\u6536\u85CF\u5939\u561B?",icon:"warning",confirmButtonColor:h.colorButtonTheme,showCancelButton:!0,confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",reverseButtons:!0}).then(async s=>{if(s.isConfirmed)try{await _e({id:o}),m.fire({title:"\u5220\u9664\u6210\u529F",confirmButtonColor:h.colorButtonTheme,heightAuto:!1,icon:"success"}),n.value=n.value.filter(e=>e.id!=o)}catch(e){console.log(e),m.fire({title:"\u5220\u9664\u5931\u8D25",heightAuto:!1,confirmButtonColor:h.colorButtonTheme,icon:"error"})}else s.dismiss===m.DismissReason.cancel&&console.log("\u53D6\u6D88")})},he=(o,n,s)=>{s.value=o,n.value=!0,console.log("\u66F4\u65B0",o)},A=async(o,n)=>{try{const s=await me();if(!s.data)return!1;o.value=s.data,n.value=!0}catch(s){console.log(s),m.fire({title:"\u83B7\u53D6\u5931\u8D25",heightAuto:!1,confirmButtonColor:h.colorButtonTheme,icon:"error"})}},g=o=>(re("data-v-6839c720"),o=o(),ie(),o),ge={class:"overall"},Be={class:"collect-item"},Ce=g(()=>t("div",{style:{"text-align":"start","margin-top":"0.6rem"}},null,-1)),ye={class:"cover"},we=g(()=>t("div",{class:"shadow-first"},null,-1)),Ee=g(()=>t("div",{class:"shadow-second"},null,-1)),Fe={class:"info"},De={class:"title"},ke={class:"creator"},xe={class:"btn"},Se={class:"function"},Ae={style:{"text-align":"center"}},Ie=g(()=>t("div",{class:"placeholder"},null,-1)),be={class:"collect-empty"},Te={class:"dialog"},Re=Y({__name:"favorites",setup(o){const{route:n,router:s,favoritesList:e,createCollectDialogShow:u,updataInfo:f}=fe(),E=_(0),F=_(),d=_(!1);j(()=>{E.value=document.documentElement.clientHeight-F.value.offsetTop});const I=(r,c)=>{s.push({name:"CollectList",params:{id:r}})},b=r=>{ve(r,e)},T=r=>{he(r,u,f)},R=r=>{r()},z=r=>{let c=[];for(let v=0;v<r;v++)c.push({});return c},L=()=>{u.value=!1,e.value=[],d.value=!1,A(e,d)};return K(()=>n.path,async()=>{e.value=[],d.value=!1,A(e,d)},{immediate:!0,deep:!0}),(r,c)=>{const v=de,V=O,H=Q,B=W,U=X,$=Z,N=ee,M=te,P=oe;return y(),C("div",ge,[l(v,{title:"\u6211\u7684\u6536\u85CF","icon-nmae":"collection"}),k(t("div",{class:"collect-list",ref_key:"scrollRef",ref:F,style:ae({height:E.value+"px",overflow:d.value?"scroll":"hidden"})},[(y(!0),C(se,null,le(p(e).length>0?p(e):z(7),a=>(y(),C("div",Be,[l(N,{style:{width:"100%",height:"7.4rem",margin:"6px 20px 20px 0px"},loading:!a.id,animated:""},{template:i(()=>[l(V,{variant:"text",style:{width:"100%",height:"100%"}}),Ce]),default:i(()=>[t("div",ye,[we,Ee,l(H,{style:{width:"100%",height:"100%","border-radius":"50px"},src:a.cover,fit:"cover"},null,8,["src"])]),t("div",Fe,[t("div",De,S(a.title),1),t("div",ke,"\u521B\u5EFA\u8005 : "+S(a.userInfo.username)+" \u64AD\u653E\u6570 : 0",1),t("div",xe,[l(B,{type:"primary",round:"",size:"small",onClick:D=>I(a.id,a.title)},{default:i(()=>[w(" \u67E5\u770B\u5185\u5BB9 ")]),_:2},1032,["onClick"])])]),t("div",Se,[l($,{placement:"bottom",trigger:"hover"},{reference:i(()=>[l(U,{class:"more-filled",size:20,color:"#99a2aa"},{default:i(()=>[l(p(ue))]),_:1})]),default:i(()=>[t("div",Ae,[l(B,{type:"primary",round:"",size:"small",onClick:D=>T(a)},{default:i(()=>[w(" \u4FEE\u6539 ")]),_:2},1032,["onClick"]),l(B,{type:"danger",round:"",size:"small",onClick:D=>b(a.id)},{default:i(()=>[w(" \u5220\u9664 ")]),_:2},1032,["onClick"])])]),_:2},1024)])]),_:2},1032,["loading"])]))),256)),Ie],4),[[x,d.value==!1||p(e).length>0]]),k(t("div",be,[l(M,{description:"\u8FD8\u672A\u521B\u5EFA\u6536\u85CF\u5939~"}),t("a",{onClick:c[0]||(c[0]=a=>u.value=!0),style:{color:"#3f9eff",cursor:"pointer"}},"\u7ACB\u5373\u521B\u5EFA")],512),[[x,p(e).length==0&&d.value==!0]]),t("div",Te,[l(P,{modelValue:p(u),"onUpdate:modelValue":c[1]||(c[1]=a=>ne(u)?u.value=a:null),title:"\u521B\u5EFA\u6536\u85CF\u5939",width:"50%",center:"","close-on-click-modal":!0,"append-to-body":!0,"before-close":R,"align-center":""},{default:i(()=>[l(pe,{info:p(f),type:!1,onShutDown:L},null,8,["info"])]),_:1},8,["modelValue"])])])}}});const tt=ce(Re,[["__scopeId","data-v-6839c720"]]);export{tt as default};
