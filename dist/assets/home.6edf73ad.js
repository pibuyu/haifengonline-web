import{d as $,r as w,o as C,a as d,c as p,b as r,w as b,F as N,e as q,f as A,g as e,u as c,E as T,h as R,n as S,t as y,i as k,j as z,k as B,_ as D,l as x,v as V,m as j,p as M,q as E,s as H,x as I,y as G,z as J,A as K,B as O,C as P,D as Q}from"./index.0228ac47.js";import"./el-infinite-scroll.3c533531.js";/* empty css                         */import{g as U,t as W}from"./topNavigation.fd811867.js";/* empty css                                                                      */import{y as X}from"./vue-ellipsis-3.es.74e51318.js";/* empty css               *//* empty css                 *//* empty css                *//* empty css                     *//* empty css                  *//* empty css               *//* empty css                   *//* empty css                                                                      *//* empty css                  */import"./index.f22c08f3.js";/* empty css                   *//* empty css                  */import"./live.facdac17.js";/* empty css                 */import"./personal.ec4b42a6.js";import"./focus.de63bc5a.js";/* empty css                        */import"./stringConversion.18593f52.js";import"./index.24bc3126.js";const L={mounted(u,a){let l=0;u.addEventListener("click",()=>{const o=new Date().getTime();o-l-a.value.time>=0&&(a.value.fun(...a.value.params),l=o)})}},Y={class:"carousel"},Z=["onClick"],ee={class:"carousel-img-box"},te={class:"carousel-title"},ae={class:"toggle-button"},oe={class:"button-item"},se={class:"button-item"},re=$({__name:"homeRotograph",props:{rotograph:{type:Array,required:!0,default:()=>[]}},setup(u){const a=u,l=B(),o=w(),_=w(""),m=w(""),v=s=>{s?o.value.next():o.value.prev()},g=s=>{_.value=a.rotograph[s].title,m.value=a.rotograph[s].color},t=s=>{switch(s.type){case"video":l.push({name:"VideoShow",params:{id:s.to_id}});break;case"article":l.push({name:"ArticleShow",params:{id:s.to_id}});break;case"live":l.push({name:"liveRoom",params:{id:s.to_id}});break}};return C(()=>{m.value=a.rotograph[0].color}),(s,n)=>{const h=D;return d(),p("div",Y,[r(c(z),{ref_key:"carouselRef",ref:o,arrow:"never",height:"490px",autoplay:!0,onChange:g},{default:b(()=>{var f;return[(d(!0),p(N,null,q(u.rotograph,i=>(d(),A(c(R),{key:i.cover},{default:b(()=>[e("div",{class:"carousel-item",onClick:F=>t(i)},[e("div",ee,[r(c(T),{class:"carousel-img",src:i.cover,fit:"cover"},null,8,["src"])])],8,Z)]),_:2},1024))),128)),e("div",{class:"gradient",style:S({background:`linear-gradient(rgba(0,0,0,0),${m.value})`})},null,4),e("div",{class:"carousel-bottom",style:S({backgroundColor:`${m.value}`})},[e("div",te,y(_.value?_.value:(f=a.rotograph[0])==null?void 0:f.title),1),e("div",ae,[k((d(),p("div",oe,[r(h,{name:"rightArrow",class:"arrow-icon rotation",color:"#fff"})])),[[c(L),{fun:v,params:[!1],time:500}]]),k((d(),p("div",se,[r(h,{name:"leftArrow",class:"arrow-icon",color:"#fff"})])),[[c(L),{fun:v,params:[!0],time:500}]])])],4)]}),_:1},512)])}}}),ie=x(re,[["__scopeId","data-v-1fce99a5"]]),le={class:"head"},ne={class:"classification"},ce={class:"classification-left"},ue={class:"play-volume"},de={class:"barrage-number"},me={class:"classification-right"},pe={class:"info"},_e={class:"video-title"},ve={class:"video-information"},he={class:"video-information-time"},ge=$({__name:"card",props:{id:{type:Number,required:!0},uid:{type:Number,required:!0},video_duration:{type:Number,required:!0},title:{type:String,required:!0},cover:{type:String,required:!0},heat:{type:Number,required:!0},barrageNumber:{type:Number,required:!0},username:{type:String,required:!0},created_at:{type:String,required:!0}},setup(u){const a=u,l=B(),o=w(!1),_=()=>{l.push({name:"VideoShow",params:{id:a.id}})},m=v=>{l.push({name:"SpaceIndividual",params:{id:v}})};return(v,g)=>{const t=D;return d(),p("div",{class:E({item:!0}),onClick:g[1]||(g[1]=s=>_())},[k(e("div",{class:E({normal:!0,mouseleave:!o.value})},[e("div",le,[e("div",{class:"item-image",style:S({backgroundImage:`url(${a.cover})`})},null,4),e("div",ne,[e("div",ce,[e("span",ue,[r(t,{name:"video",class:"icon",color:"#fff"}),e("span",null,y(a.heat),1)]),e("span",de,[r(t,{name:"barrageNumber",class:"icon",color:"#fff"}),e("span",null,y(a.barrageNumber),1)])]),e("div",me,[e("span",null,y(c(j)(a.video_duration)),1)])])]),e("div",pe,[e("div",_e,[r(c(X),{text:a.title,visibleLine:2},null,8,["text"])]),e("div",ve,[r(t,{name:"up",class:"icon",color:"#999"}),e("span",{class:"video-information-username",style:{cursor:"pointer"},onClick:g[0]||(g[0]=s=>m(a.uid))},y(a.username),1),e("span",he," \xB7"+y(c(M)(a.created_at)),1)])])],2),[[V,!o.value]])])}}});const fe=x(ge,[["__scopeId","data-v-32bc8aa5"]]),ye=u=>(P("data-v-3e928692"),u=u(),Q(),u),be={class:"mian"},we={class:"head"},ke=ye(()=>e("div",{class:"cover-picture"},null,-1)),Se={class:"middle","infinite-scroll-distance":770,"record-empty":40,"infinite-scroll-delay":1e3,"infinite-scroll-immediate":!1},$e={class:"rotograph-skeleton"},xe={style:{"text-align":"start","margin-top":"0.3rem"}},Ee={style:{"text-align":"start","margin-top":"0.6rem"}},Le={key:0,class:"loading-indicator"},Ce=$({__name:"home",setup(u){const a=w(!1),l=H({page_info:{page:1,size:15}});let o=w({rotograph:[],videoList:[]});const _=I(()=>{let t=[];return l.page_info.page==2?o.value.videoList.length%11==0?(t=[...t,...o.value.videoList,...m(15)],v(o,l)):t=[...o.value.videoList]:l.page_info.page>2?(o.value.videoList.length-11)%l.page_info.size==0?t=[...t,...o.value.videoList,...m(15)]:t=[...o.value.videoList]:t=[...o.value.videoList],t}),m=t=>{let s=[];for(let n=0;n<t;n++)s.push({});return s},v=async(t,s)=>{const n=await U(s);if(!!n.data)return t.value.rotograph=n.data.rotograph,t.value.videoList=[...t.value.videoList,...n.data.videoList],t.value.videoList.sort((h,f)=>h.heat!=f.heat?f.heat-h.heat:f.barrageNumber-h.barrageNumber),console.log("\u4E3B\u9875\u7684\u5168\u90E8video\u4FE1\u606F\u4E3A",t.value.videoList),s.page_info.page=s.page_info.page+1,n},g=async()=>{if(a.value=!0,console.log("\u89E6\u5E95"),o.value.videoList.length<=0)return a.value=!1,!1;await v(o,l),a.value=!1};return C(async()=>{let t=await v(o,l);console.log("\u83B7\u53D6\u4E3B\u9875\u4FE1\u606F\u7684\u8FD4\u56DE\u7ED3\u679C",t)}),(t,s)=>{const n=G,h=J,f=K;return d(),p("div",be,[e("div",we,[r(W,{color:"#18191C",scroll:"",displaySearch:!0})]),ke,k((d(),p("div",Se,[e("div",$e,[r(h,{style:{width:"100%",height:"70%"},class:"video-card",loading:!c(o).rotograph.length,animated:""},{template:b(()=>[r(n,{variant:"text",style:{width:"100%",height:"100%"}}),e("div",xe,[r(n,{variant:"text",style:{width:"100%",height:"5rem"}})])]),default:b(()=>{var i;return[r(ie,{rotograph:(i=c(o))==null?void 0:i.rotograph},null,8,["rotograph"])]}),_:1},8,["loading"])]),(d(!0),p(N,null,q(c(_).length?c(_):m(11),(i,F)=>(d(),p("div",{class:"video-card",key:i.id},[r(h,{style:{width:"100%",height:"13rem"},class:"video-card",loading:!i.id,animated:""},{template:b(()=>[r(n,{variant:"text",style:{width:"100%",height:"100%"}}),e("div",Ee,[r(n,{variant:"h3",style:{width:"100%"}}),e("div",null,[r(n,{variant:"h3",style:{width:"80%"}}),r(n,{variant:"h3",style:{width:"60%"}})])])]),default:b(()=>[r(fe,{id:i.id,title:i.title,username:i.username,uid:i.uid,video_duration:i.video_duration,"barrage-number":i.barrageNumber,heat:i.heat,cover:i.cover,created_at:i.created_at},null,8,["id","title","username","uid","video_duration","barrage-number","heat","cover","created_at"])]),_:2},1032,["loading"])]))),128)),a.value?(d(),p("div",Le,"\u6B63\u5728\u52A0\u8F7D\u4E2D...")):O("",!0)])),[[f,g]])])}}});const et=x(Ce,[["__scopeId","data-v-3e928692"]]);export{et as default};
