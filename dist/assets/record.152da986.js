import{af as H,r as d,aU as J,k as N,S as k,H as w,d as U,M as j,E as q,U as G,J as O,b3 as P,b4 as W,a2 as K,A as Q,a6 as X,c as v,b as r,i as _,u as n,w as b,v as g,g as a,C as Y,D as Z,a as p,F as ee,e as te,f as se,t as F,aW as oe,q as ae,b5 as ne,l as le}from"./index.0228ac47.js";import"./el-infinite-scroll.3c533531.js";/* empty css                 *//* empty css                  *//* empty css                  *//* empty css                        */import{_ as ie}from"./pageHeader.3132b316.js";import{r as ce,t as re}from"./personal.ec4b42a6.js";import{v as ue}from"./focus.de63bc5a.js";import{y as C}from"./vue-ellipsis-3.es.74e51318.js";import"./index.f22c08f3.js";const de=()=>{const e=H().globalData.loading,o=J(),i=N(),t=d([]),s=d({page:1,size:8}),c=d(!0),h=d(!1),u=d(!1);return{recordList:t,isLoading:c,route:o,router:i,pageInfo:s,loading:e,isLoadMore:h,isTheEnd:u}},_e=(e,o)=>{e.type=="\u89C6\u9891"?o.push({name:"VideoShow",params:{id:e.to_id}}):e.type=="\u4E13\u680F"?o.push({name:"ArticleShow",params:{id:e.to_id}}):o.push({name:"liveRoom",params:{id:e.to_id}})},pe=async(e,o,i)=>{try{i.loading=!0,await re({id:o}),i.loading=!1,e.value=e.value.filter(t=>(t.id==o&&(t.is_delete=!0),t)),setTimeout(()=>{e.value=e.value.filter(t=>t.id!=o)},400)}catch{i.loading=!1,k.fire({title:"\u5220\u9664\u5931\u8D25",heightAuto:!1,confirmButtonColor:w.colorButtonTheme,icon:"error"})}},S=async(e,o,i,t)=>{try{const s=await ce({page_info:i.value});if(i.value.page++,!s.data)return!1;s.data.length==0&&(console.log("\u65E0\u66F4\u591A\u8BB0\u5F55"),t.value=!0),s.data=s.data.filter(c=>(c.is_delete=!1,c)),e.value=[...e.value,...s.data],console.log(e),o.value=!1}catch(s){console.log(s),k.fire({title:"\u83B7\u53D6\u5386\u53F2\u8BB0\u5F55\u5931\u8D25",heightAuto:!1,confirmButtonColor:w.colorButtonTheme,icon:"error"})}},D=e=>(Y("data-v-fb307104"),e=e(),Z(),e),me={class:"overall"},fe={class:"content"},ve=["infinite-scroll-disabled"],he={class:"timeline-item"},ge=["onClick"],Be={class:"item-right"},ye={class:"data"},Ee=["onClick"],be={class:"item-info"},Fe={class:"username"},Ce=D(()=>a("span",{class:"partition"},"|",-1)),Se={class:"type"},ke={class:"function"},we={class:"record-empty"},De={class:"load-more"},Ie=D(()=>a("div",{class:"spread-bottom"},null,-1)),Re=U({__name:"record",setup(e){C;const{route:o,router:i,recordList:t,isLoading:s,pageInfo:c,loading:h,isLoadMore:u,isTheEnd:m}=de(),I=f=>{pe(t,f,h)},B=f=>{_e(f,i)},R=async()=>{if(m.value||(u.value=!0,t.value.length<=0))return!1;S(t,s,c,m),u.value=!1};return j(()=>o.path,async()=>{t.value=[],s.value=!0,S(t,s,c,m)},{immediate:!0,deep:!0}),(f,Te)=>{const T=ie,x=q,L=G,A=O,z=P,M=W,V=K,$=Q,y=X;return p(),v("div",me,[r(T,{title:"\u5386\u53F2\u8BB0\u5F55","icon-nmae":"playRecording"}),_((p(),v("div",fe,[_((p(),v("div",{class:"timeline","infinite-scroll-delay":1e3,"infinite-scroll-disabled":n(m),"infinite-scroll-immediate":!1},[r(M,null,{default:b(()=>[(p(!0),v(ee,null,te(n(t),(l,xe)=>(p(),se(z,{class:ae({animate__animated:!0,animate__fadeOutLeftBig:l.is_delete}),key:l.id,timestamp:n(ne)(l.updated_at),placement:"top"},{default:b(()=>[a("div",he,[a("div",{class:"item-left",onClick:E=>B(l)},[r(x,{class:"item-img",src:l.cover,fit:"cover"},null,8,["src"])],8,ge),a("div",Be,[a("div",ye,[a("div",{class:"item-title",onClick:E=>B(l)},[r(n(C),{visibleLine:1,text:l.title},null,8,["text"])],8,Ee),a("div",be,[r(L,{size:38,src:l.photo},null,8,["src"]),a("span",Fe,F(l.username),1),Ce,a("span",Se,F(l.type),1)])]),a("div",ke,[_(r(A,{type:"info",icon:n(oe),onClick:E=>I(l.id),circle:""},null,8,["icon","onClick"]),[[n(ue)]])])])])]),_:2},1032,["class","timestamp"]))),128))]),_:1})],8,ve)),[[g,n(t).length>0],[$,R]]),_(a("div",we,[r(V,{description:"\u6682\u65E0\u5386\u53F2\u8BB0\u5F55,\u5FEB\u53BB\u901B\u901B\u53ED~"})],512),[[g,n(t).length==0&&n(s)==!1]]),_(a("div",De,null,512),[[g,n(t).length>0&&n(u)],[y,!0]]),Ie])),[[y,n(s)]])])}}});const qe=le(Re,[["__scopeId","data-v-fb307104"]]);export{qe as default};
