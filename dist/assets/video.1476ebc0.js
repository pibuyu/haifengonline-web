import{d as G,s as ne,o as me,c as D,g as e,i as A,ba as po,b as i,q as U,u as o,f as O,w as C,J as ve,v as ce,F as z,e as Y,S,H as T,_ as _e,a as h,G as w,t as p,l as X,r as k,bb as ho,aG as no,I as ao,a6 as go,aH as Fo,n as io,m as uo,k as ro,af as Co,L as lo,aU as yo,M as Qe,N as bo,O as Do,U as Bo,ae as ko,bc as Eo,bd as Io,aR as Ze,B as le,aa as wo,C as Ao,D as $o,b1 as eo,aX as So,aZ as Vo,X as de,b8 as xo,Y as To}from"./index.0228ac47.js";/* empty css                    *//* empty css               *//* empty css                     *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                 *//* empty css                  */import{v as No,s as Lo,t as Mo,w as Po,x as qo,y as Uo,z as Oo,A as zo,B as Ro,C as jo}from"./contribution.36ea1e3c.js";import{v as M}from"./focus.de63bc5a.js";import{x as Yo,j as Ho,y as Wo}from"./personal.ec4b42a6.js";/* empty css               *//* empty css                *//* empty css               *//* empty css                                                                      */import"./index.f22c08f3.js";/* empty css                   *//* empty css                 */import{y as H}from"./vue-ellipsis-3.es.74e51318.js";import"./el-infinite-scroll.3c533531.js";/* empty css                        */import{u as Jo}from"./index.24bc3126.js";import{a as Go,u as Xo}from"./usePersonalLetter.c7e483ac.js";import{D as Ko}from"./DPlayer.min.b7c897e2.js";import{u as Qo}from"./comment.87a04c15.js";import{u as Zo}from"./collectList.5b6ec1ca.js";const et={class:"comments-info"},ot={class:"comments-fun"},tt=["onClick"],st=G({__name:"videoCommentPosting",props:{videoID:{type:Number,required:!0,default:1},commentsID:{type:Number,required:!0}},emits:["updateVideoInfo"],setup(r,{emit:u}){const F=r,m=()=>{if(!d.comments.trim())return S.fire({title:"\u60A8\u8FD8\u6CA1\u6709\u5199\u8BC4\u8BBA",heightAuto:!1,confirmButtonColor:T.colorButtonTheme,icon:"error"}),Promise.reject(new Error("\u8BC4\u8BBA\u4E0D\u80FD\u4E3A\u7A7A"));Promise.resolve()},a=ne({show:!1,animation:!1,animationBox:!0,emoji:["\u{1F600}","\u{1F604}","\u{1F601}","\u{1F606}","\u{1F605}","\u{1F923}","\u{1F602}","\u{1F642}","\u{1F643}","\u{1F609}","\u{1F60A}","\u{1F607}","\u{1F970}","\u{1F60D}","\u{1F929}","\u{1F61A}","\u{1F917}","\u{1F928}","\u{1F610}","\u{1F611}","\u{1F636}","\u{1F910}","\u{1F60F}","\u{1F612}","\u{1F62E}\u200D\u{1F4A8}","\u{1F925}","\u{1F60C}","\u{1F62A}","\u{1F924}","\u{1F637}","\u{1F912}","\u{1F915}","\u{1F975}","\u{1F635}","\u{1F615}","\u{1F641}","\u2639\uFE0F","\u{1F633}","\u{1F61E}","\u{1F62D}","\u{1F971}","\u{1F629}","\u{1F630}","\u{1F632}","\u{1F62F}","\u{1F620}","\u{1F629}","\u{1F627}","\u{1F62F}","\u{1F97A}"]}),d=ne({comments:""});me(()=>{console.log("\u4F20\u9012\u7ED9\u56DE\u590D\u8BC4\u8BBAdialog\u7684commentsID\u4E3A",F.commentsID)});const v=()=>{a.animationBox=!a.animationBox,a.show?setTimeout(()=>{a.show=!a.show},200):a.show=!a.show},g=async(B,_)=>{await m();try{const f={video_id:_,content:B.comments,content_id:F.commentsID},c=await No(f);console.log(c),B.comments="";const s=await Lo({video_id:_});if(!s.data)throw"\u83B7\u53D6\u8BC4\u8BBA\u4FE1\u606F\u5931\u8D25";u("updateVideoInfo",s.data),S.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,didOpen:V=>{V.addEventListener("mouseenter",S.stopTimer),V.addEventListener("mouseleave",S.resumeTimer)}}).fire({icon:"success",title:"\u8BC4\u8BBA\u6210\u529F"})}catch{S.fire({title:"\u8BC4\u8BBA\u5931\u8D25",heightAuto:!1,confirmButtonColor:T.colorButtonTheme,icon:"error"})}};return(B,_)=>{const f=_e;return h(),D(z,null,[e("div",et,[A(e("textarea",{class:"comments-textarea",placeholder:"\u5199\u4E0B\u70B9\u4EC0\u4E48...",maxlength:"1000","onUpdate:modelValue":_[0]||(_[0]=c=>d.comments=c)},`
        `,512),[[po,d.comments]])]),e("div",ot,[e("div",null,[i(f,{name:"expression",class:U({"icon-small":!0,animate__animated:!0,animate__tada:a.animation}),onClick:v,onMouseleave:_[1]||(_[1]=c=>a.animation=!1),onMouseover:_[2]||(_[2]=c=>a.animation=!0)},null,8,["class"])]),e("div",null,[A((h(),O(o(ve),{type:"primary",round:"",onClick:_[3]||(_[3]=c=>g(d,r.videoID))},{default:C(()=>[w("\u53D1\u5E03")]),_:1})),[[o(M)]])])]),A(e("div",{class:U({"comments-emoji":!0,animate__animated:!0,animate__headShake:!a.animationBox,animate__flipOutX:a.animationBox})},[(h(!0),D(z,null,Y(a.emoji,c=>(h(),D("span",{class:"emoji-item",key:c,onClick:s=>d.comments=d.comments+c},p(c),9,tt))),128))],2),[[ce,a.show]])],64)}}});const oo=X(st,[["__scopeId","data-v-0eef0206"]]),nt={class:"favorite-video"},at={class:"checkbox"},it={class:"title"},ut={class:"num"},rt={class:"create"},lt={class:"function"},dt=G({__name:"favoriteVideo",props:{id:{type:Number,required:!0}},emits:["shutDown","success","cancelCollect"],setup(r,{emit:u}){const F=r,m=k(""),a=k({}),d=k(!0),v=k([]),g=async(f,c)=>{try{c.value=!0;const s=await Yo({video_id:F.id});if(!s.data)return!1;s.data=s.data.filter(b=>(b.selected?(v.value.push(b.id),b.choose=!0):b.choose=!1,!0)),f.value=s.data,console.log("\u83B7\u53D6\u7528\u6237\u7684\u6536\u85CF\u5939\u4FE1\u606F\u8FD4\u56DE\u7ED3\u679C\u4E3A",s),c.value=!1}catch(s){console.log(s)}},B=async()=>{try{await Ho({title:m.value}),g(a,d),m.value=""}catch{S.fire({title:"\u521B\u5EFA\u5931\u8D25",confirmButtonColor:T.colorButtonTheme,heightAuto:!1,icon:"error"})}},_=async()=>{try{let f=[];a.value.filter(c=>{c.choose&&f.push(c.id)}),console.log("\u539F\u672C\u7684\u6536\u85CF\u5939\u4E3A",v.value,"\u65B0\u9009\u62E9\u7684\u6536\u85CF\u5939id\u4E3A",f),JSON.stringify(v.value)===JSON.stringify(f)&&S.fire({title:"\u672A\u66F4\u6539",heightAuto:!1,confirmButtonColor:T.colorButtonTheme,icon:"warning"}),await Wo({ids:f,video_id:F.id}),u("success"),f.length==0&&u("cancelCollect"),u("shutDown"),S.fire({title:"\u64CD\u4F5C\u6210\u529F",confirmButtonColor:T.colorButtonTheme,heightAuto:!1,icon:"success"}),g(a,d)}catch(f){u("shutDown"),S.fire({title:f.message,confirmButtonColor:T.colorButtonTheme,heightAuto:!1,icon:"error"})}};return me(()=>{g(a,d)}),(f,c)=>{const s=ho,b=ve,V=ao,N=go;return h(),D("div",nt,[A((h(),D("div",at,[(h(!0),D(z,null,Y(a.value,y=>(h(),D("div",{class:"check-item",key:y.id},[i(s,{modelValue:y.choose,"onUpdate:modelValue":$=>y.choose=$,size:"large"},{default:C(()=>[e("div",it,p(y.title),1),e("div",ut,p(y.present)+"/"+p(y.max),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))])),[[N,d.value]]),e("div",rt,[i(V,{modelValue:m.value,"onUpdate:modelValue":c[1]||(c[1]=y=>m.value=y),placeholder:"\u521B\u5EFA\u6536\u85CF\u5939","prefix-icon":o(no)},{append:C(()=>[i(b,{type:"primary",round:"",onClick:c[0]||(c[0]=y=>B()),disabled:m.value==""},{default:C(()=>[w("\u521B\u5EFA")]),_:1},8,["disabled"])]),_:1},8,["modelValue","prefix-icon"])]),e("div",lt,[A((h(),O(b,{type:"primary",round:"",onClick:_},{default:C(()=>[w("\u786E\u8BA4")]),_:1})),[[o(M)]])])])}}});const ct=X(dt,[["__scopeId","data-v-d60f4dfd"]]),mt={class:"video-introduce"},vt={class:"introduce"},_t={class:"tag"},ft=G({__name:"videoIntroduce",props:{introduce:{type:String,required:!1},label:{type:Array,required:!1}},setup(r){H;const u=k(3);return(F,m)=>{const a=Fo;return h(),D("div",mt,[e("div",vt,[i(o(H),{text:r.introduce?r.introduce:"",visibleLine:u.value,reflowOnResize:""},{ellipsisNode:C(()=>[e("span",{class:"show-more",onClick:m[0]||(m[0]=d=>u.value=999)},"... \u5C55\u5F00")]),_:1},8,["text","visibleLine"])]),e("div",_t,[(h(!0),D(z,null,Y(r.label,d=>(h(),O(a,{key:d,class:"tag-item",type:"info",effect:"dark",round:""},{default:C(()=>[w(p(d),1)]),_:2},1024))),128))])])}}});const pt=X(ft,[["__scopeId","data-v-092ac31f"]]),ht={class:"card-left"},gt={class:"classification"},Ft={class:"classification-right"},Ct={class:"card-right"},yt={class:"video-title"},bt={class:"video-information-top"},Dt={class:"video-information-username"},Bt={class:"video-information-bottom"},kt={class:"video-information-plays-num"},Et={class:"video-information-username"},It=G({__name:"videoPageVideoCard",props:{id:{type:Number,required:!0,default:0},video_duration:{type:Number,required:!0},title:{type:String,required:!0},cover:{type:String,required:!0},heat:{type:Number,required:!0},barrageNumber:{type:Number,required:!0},username:{type:String,required:!0},created_at:{type:String,required:!0}},setup(r){const u=r,F=ro();k(!1);const m=()=>{F.push({name:"VideoShow",params:{id:u.id}})};return(a,d)=>{const v=_e;return h(),D("div",{class:"video-card",onClick:d[0]||(d[0]=g=>m())},[e("div",ht,[e("div",{class:"item-image",style:io({backgroundImage:`url(${u.cover})`})},null,4),e("div",gt,[e("div",Ft,[e("span",null,p(o(uo)(u.video_duration)),1)])])]),e("div",Ct,[e("div",yt,[i(o(H),{text:u.title,visibleLine:2},null,8,["text"])]),e("div",bt,[i(v,{name:"up",class:"icon",color:"#999"}),e("span",Dt,p(u.username),1)]),e("div",Bt,[i(v,{name:"video",class:"icon",color:"#999"}),e("span",kt,p(u.heat),1),i(v,{name:"barrageNumber",class:"icon",color:"#999"}),e("span",Et,p(u.barrageNumber),1)])])])}}});const wt=X(It,[["__scopeId","data-v-5ec769d9"]]),At=(r,u)=>{r.value=u},$t=r=>{r.videoInfo.barrageNumber++},to=()=>{const r=yo(),u=ro(),F=Co(),m=lo(),a=k(),d=k(0),v=ne({}),g=k(""),B=k(!1),_=k(!0),f=k(0),c=ne({show:!1,commentsID:0});return{route:r,router:u,userStore:m,videoRef:a,videoID:d,videoInfo:v,barrageInput:g,barrageListShow:B,liveNumber:f,replyCommentsDialog:c,videoBarrage:_,global:F}},St=async(r,u,F,m,a)=>{if(u&&u.video){const B=u.video.currentTime;console.log("currentTime",B)}else{console.error("dpaler or dpaler.video is undefined");return}const d=await Ro({author:F.userInfoData.username,color:16777215,id:m.videoInfo.id.toString(),text:r.value,time:u.video.currentTime,type:0,token:F.userInfoData.token});if(console.log("\u64AD\u653E\u754C\u9762\u53D1\u9001\u5F39\u5E55\u7684\u8FD4\u56DE\u7ED3\u679C\u4E3A",d),d.code!=0){S.fire({title:"\u5F39\u5E55\u670D\u52A1\u5F02\u5E38",heightAuto:!1,confirmButtonColor:T.colorButtonTheme,icon:"error"});return}const v={text:r.value,color:"#fff",type:"right"};u.danmaku.draw(v),r.value="";let g=JSON.stringify({type:"sendBarrage",data:""});a.send(g)},Vt=async r=>{try{await Mo({video_id:r.videoInfo.id}),r.videoInfo.is_like=!r.videoInfo.is_like}catch{S.fire({title:"\u70B9\u8D5E\u5931\u8D25",heightAuto:!1,confirmButtonColor:T.colorButtonTheme,icon:"error"})}},xt=r=>{const u=Math.floor(r/60),F=Math.floor(r%60);return`${u}\u5206${F}\u79D2`},so=async(r,u,F,m,a,d)=>{try{if(!u.params.id){F.back(),S.fire({title:"\u83B7\u53D6\u89C6\u9891\u5931\u8D25",heightAuto:!1,confirmButtonColor:T.colorButtonTheme,icon:"error"}),F.back();return}d.globalData.loading.loading=!0,m.value=Number(u.params.id);const v=await Po({video_id:m.value});if(!v.data)return!1;a.videoInfo=v.data.videoInfo,a.recommendList=v.data.recommendList;let g=[];a.videoInfo.video&&(g=[...g,{name:"1080P\u8D85\u6E05",url:a.videoInfo.video}]),a.videoInfo.video_720p&&(g=[...g,{name:"720P\u9AD8\u6E05",url:a.videoInfo.video_720p}]),a.videoInfo.video_480p&&(g=[...g,{name:"480P\u6807\u6E05",url:a.videoInfo.video_480p}]),a.videoInfo.video_360p&&(g=[...g,{name:"360P\u6D41\u7545",url:a.videoInfo.video_360p}]);const B=await qo({id:m.value.toString()}),_=await Uo({id:m.value.toString()});if(!B.data)return!1;a.barrageList=B.data;const f=lo(),c=new Ko({container:r.value,loop:!0,lang:"zh-cn",logo:"",autoplay:!0,danmaku:{id:m.value.toString(),api:Oo,token:f.userInfoData.token,unlimited:!0,bottom:"15%"},mutex:!1,video:{quality:g,defaultQuality:0,url:"\u4E0D\u586B",pic:a.videoInfo.cover}});c.video.crossOrigin="anonymous";let s=0,b=!1;const V=`lastWatchTime_${m.value}`;c.on("timeupdate",async()=>{const y=c.video.currentTime;localStorage.setItem(V,String(y));const $=Date.now();if($-s>=3e3&&!b){b=!0,console.log("\u4E0A\u6B21\u66F4\u65B0\u65F6\u95F4\u4E3A",s,"\u5F53\u524D\u65F6\u95F4\u4E3A",$);try{(await zo({id:m.value.toString(),time:y.toString()})).code!==200?console.log("\u89C6\u9891\u89C2\u770B\u8FDB\u5EA6\u4FDD\u5B58\u5931\u8D25"):s=$}catch(K){console.error("\u53D1\u9001\u89C6\u9891\u89C2\u770B\u8FDB\u5EA6\u65F6\u53D1\u751F\u9519\u8BEF:",K)}finally{b=!1}}});let N=parseFloat(localStorage.getItem(V))||0;return _&&(N=parseFloat(_.data)),c.on("loadedmetadata",()=>{if(N>0){const y=Math.floor(N);c.seek(N);const $=xt(y);c.notice(`\u4E0A\u6B21\u89C2\u770B\u5230 ${$} \uFF0C\u81EA\u52A8\u8DF3\u8F6C`,1500,.5)}}),d.globalData.loading.loading=!1,c}catch(v){d.globalData.loading.loading=!1,console.log(v)}},Tt=(r,u,F,m)=>{let a;const d=()=>{console.log("websocket \u8FDE\u63A5\u6210\u529F ")},v=()=>{console.error("websocket \u8FDE\u63A5\u5931\u8D25")},g=async B=>{let _=JSON.parse(B.data);switch(console.log(_),_.type){case"numberOfViewers":At(m,_.data.people);break;case"responseBarrageNum":$t(u);break}};if(typeof WebSocket>"u"){S.fire({title:"\u60A8\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301socket",heightAuto:!1,confirmButtonColor:T.colorButtonTheme,icon:"error"}),F.back();return}else a=new WebSocket("ws://www.haifengonline.top:8081/ws/videoSocket?token="+r.userInfoData.token+"&videoID="+u.videoInfo.id),a.onopen=d,a.onerror=v,a.onmessage=g;return a},R=r=>(Ao("data-v-dca8f5d4"),r=r(),$o(),r),Nt={class:"video-page"},Lt={class:"video-content"},Mt={class:"content-left"},Pt={class:"vidoe-info"},qt={class:"vidoe-title"},Ut={class:"video-data"},Ot={class:"video-data-list"},zt={class:"data-item"},Rt={class:"data-item"},jt={class:"data-item"},Yt={class:"data-item"},Ht={class:"info-right"},Wt={class:"video-box"},Jt={class:"video-sending"},Gt={class:"live-info"},Xt={class:"barrage-set"},Kt={class:"barrage-input"},Qt={class:"barrage-input"},Zt={class:"comments-box"},es={class:"comments-main"},os={class:"comments-show"},ts={class:"comments-show-titel"},ss=R(()=>e("span",null,"Comments | ",-1)),ns={class:"comments-show-info"},as={class:"comment-info-detail"},is={class:"comment-info-content"},us={class:"content-head"},rs=["onClick"],ls={class:"comment-info-other"},ds={class:"commentInfo-reply"},cs=["onClick","onMouseover"],ms={class:"content-info"},vs={class:"comment-info-content"},_s={class:"content-head"},fs=["onClick"],ps={class:"comment-info-other"},hs={key:0},gs=R(()=>e("span",{class:"at"},"@",-1)),Fs={class:"at-user"},Cs=R(()=>e("span",{class:"maohao"}," :",-1)),ys={class:"at-user-content"},bs={class:"commentInfo-reply"},Ds=["onClick","onMouseover"],Bs={class:"content-info"},ks=R(()=>e("div",{class:"comment-partition"},null,-1)),Es={class:"content-right"},Is={class:"user-card"},ws={class:"card-left"},As={class:"card-right"},$s={class:"username"},Ss={class:"signature"},Vs=R(()=>e("span",null,"...",-1)),xs={class:"btn-list"},Ts={class:"barrage-box"},Ns={class:"barrage-top-navigation"},Ls={class:"box-left"},Ms=R(()=>e("span",null,"\u5F39\u5E55\u5217\u8868",-1)),Ps=R(()=>e("span",null,"...",-1)),qs={class:"recommend-lsit"},Us={class:"dialog-list"},Os={class:"dialog"},zs=G({__name:"video",setup(r){k(!1);const u=Qo();Zo();const F=u.highLightCommentId,{toClipboard:m}=Jo(),a=async E=>{try{await m("8.134.103.211:6173"+E),wo({title:"Success",message:"\u94FE\u63A5\u590D\u5236\u5230\u526A\u5207\u677F\uFF0C\u53EF\u4EE5\u53D1\u9001\u7ED9\u670B\u53CB\u5566",type:"success"})}catch(n){console.error(n)}};H;var d=k({}),v;const{videoRef:g,route:B,router:_,userStore:f,videoID:c,videoInfo:s,barrageInput:b,barrageListShow:V,liveNumber:N,replyCommentsDialog:y,videoBarrage:$,global:K}=to(),j=k(),fe=k(0),pe=k(""),co=()=>{St(b,d.value,f,s,v)},he=(E,n)=>{pe.value=n,y.commentsID=E,y.show=!y.show},ge=E=>{s.videoInfo.comments=E.comments,s.videoInfo.comments_number=E.comments_number},Fe=async()=>{await Go(s.videoInfo.creatorInfo.id)&&(s.videoInfo.creatorInfo.is_attention=!s.videoInfo.creatorInfo.is_attention)},q=E=>{_.push({name:"SpaceIndividual",params:{id:E}})},Q=k(!1),mo=()=>{Q.value=!1},vo=E=>{E()},_o=Qe(()=>B.path,async()=>{if(!B.path.includes("/videoShow/video"))return!1;if(d.value=await so(g,B,_,c,s,K),f.userInfoData.token){let E=Tt(f,s,_,N);E&&(v=E)}},{immediate:!0,deep:!0}),fo=Qe($,(E,n)=>{$.value?d.value.danmaku.show():d.value.danmaku.hide()});return me(async()=>{var W;const{videoRef:E,route:n,router:x,userStore:L,videoID:Z,videoInfo:P,barrageInput:ae,barrageListShow:ee,liveNumber:Ce,replyCommentsDialog:ie,videoBarrage:ue,global:oe}=to();await so(E,n,x,Z,P,oe);let te=String((W=P==null?void 0:P.videoInfo)==null?void 0:W.id),se=await jo({id:te});fe.value=se.data,await bo(),F!=0&&document.querySelector(".highlightComment").scrollIntoView({behavior:"smooth"})}),Do(()=>{_o(),fo(),v==null||v.close()}),(E,n)=>{var ie,ue,oe,te,se,W,re,ye,be,De,Be,ke,Ee,Ie,we,Ae,$e,Se,Ve,xe,Te,Ne,Le,Me,Pe,qe,Ue,Oe,ze,Re,je,Ye,He,We,Je,Ge,Xe,Ke;const x=_e,L=ve,Z=ao,P=Bo,ae=ko,ee=Eo,Ce=Io;return h(),D("div",Nt,[e("div",Lt,[e("div",Mt,[e("div",Pt,[e("div",qt,p((ue=(ie=o(s))==null?void 0:ie.videoInfo)==null?void 0:ue.title),1),e("div",Ut,[e("div",Ot,[e("span",zt,[i(x,{name:"video",class:"icon",color:"#9499A0"}),w(" "+p((te=(oe=o(s))==null?void 0:oe.videoInfo)==null?void 0:te.heat),1)]),e("span",Rt,[i(x,{name:"barrageNumber",class:"icon",color:"#9499A0"}),w(" "+p((W=(se=o(s))==null?void 0:se.videoInfo)==null?void 0:W.barrageNumber),1)]),e("span",jt,[i(x,{name:"time",class:"icon",color:"#9499A0"}),w(" "+p(o(eo)((ye=(re=o(s))==null?void 0:re.videoInfo)==null?void 0:ye.created_at)),1)]),e("span",Yt,[i(x,{name:"forbid",class:"forbid-icon",color:"#9499A0"}),w("\u672A\u7ECF\u4F5C\u8005\u6388\u6743\uFF0C\u7981\u6B62\u8F6C\u8F7D ")]),e("div",Ht,[A((h(),O(L,{type:(De=(be=o(s))==null?void 0:be.videoInfo)!=null&&De.is_like?"primary":"info",class:"giveLike",onClick:n[0]||(n[0]=t=>o(Vt)(o(s)))},{default:C(()=>[A(i(x,{name:"giveLike",class:"icon",color:"#fff",circle:""},null,512),[[o(M)]])]),_:1},8,["type"])),[[o(M)]]),A(i(L,{type:(ke=(Be=o(s))==null?void 0:Be.videoInfo)!=null&&ke.is_collect?"primary":"info",onClick:n[1]||(n[1]=t=>Q.value=!0),icon:o(So),circle:""},null,8,["type","icon"]),[[o(M)]]),A(i(L,{type:"info",onClick:n[2]||(n[2]=t=>a(o(B).fullPath)),icon:o(Vo),circle:""},null,8,["icon"]),[[o(M)]])])])])]),e("div",Wt,[e("div",{ref_key:"videoRef",ref:g,class:U({player:!0,"dplayer-comment-show":!o(f).userInfoData.token}),id:"dplay"},null,2),e("div",Jt,[e("div",Gt,[e("span",null,p(o(N))+" \u4EBA\u6B63\u5728\u770B",1),w(" , "),e("span",null," \u5DF2\u88C5\u586B "+p((Ie=(Ee=o(s))==null?void 0:Ee.videoInfo)==null?void 0:Ie.barrageNumber)+"\u6761\u5F39\u5E55 ",1)]),e("div",Xt,[i(x,{onClick:n[3]||(n[3]=t=>$.value=!o($)),name:o($)?"barrageOn":"barrageOff",class:"barrage-icon",color:"#61666D"},null,8,["name"]),A(e("div",Kt,[i(Z,{modelValue:o(b),"onUpdate:modelValue":n[5]||(n[5]=t=>Ze(b)?b.value=t:null),placeholder:"\u53D1\u4E2A\u53CB\u5584\u7684\u5F39\u5E55\u89C1\u8BC1\u5F53\u4E0B"},{append:C(()=>[e("div",null,[i(L,{type:"primary",onClick:n[4]||(n[4]=t=>co())},{default:C(()=>[w("\u53D1\u9001")]),_:1})])]),_:1},8,["modelValue"])],512),[[ce,o(f).userInfoData.token]]),A(e("div",Qt,[i(Z,{modelValue:o(b),"onUpdate:modelValue":n[7]||(n[7]=t=>Ze(b)?b.value=t:null),placeholder:"\u8BF7\u5148\u767B\u5165\u6216\u8005\u6CE8\u518C\u518D\u6765\u55F7",readonly:""},{append:C(()=>[e("div",null,[i(L,{onClick:n[6]||(n[6]=t=>o(_).push({name:"Login"})),type:"primary"},{default:C(()=>[w("\u767B\u5165 ")]),_:1})])]),_:1},8,["modelValue"])],512),[[ce,!o(f).userInfoData.token]])])])]),i(pt,{introduce:(Ae=(we=o(s))==null?void 0:we.videoInfo)==null?void 0:Ae.introduce,label:(Se=($e=o(s))==null?void 0:$e.videoInfo)==null?void 0:Se.label},null,8,["introduce","label"]),e("div",Zt,[e("div",es,[i(oo,{videoID:(xe=(Ve=o(s))==null?void 0:Ve.videoInfo)==null?void 0:xe.id,commentsID:0,onUpdateVideoInfo:ge},null,8,["videoID"])]),e("div",os,[e("div",ts,[ss,e("span",null,p(fe.value)+"\u6761\u8BC4\u8BBA ",1)]),e("div",ns,[(h(!0),D(z,null,Y((Ne=(Te=o(s))==null?void 0:Te.videoInfo)==null?void 0:Ne.comments,t=>(h(),D("div",{class:"comment-info-detail-box",key:t.id},[e("div",as,[i(P,{size:36,src:t.photo,onClick:l=>q(t.uid)},null,8,["src","onClick"]),e("div",is,[e("div",us,[e("div",null,[e("span",{class:"comment-info-username",onClick:l=>q(t.uid)},p(t.username),9,rs),e("span",ls,p(o(de)(t.created_at).format("YYYY/MM/DD   HH:mm")),1)]),e("div",ds,[(h(),D("span",{key:t.id,onClick:l=>he(t.id,t.username),class:U({highlight:j.value===t.id}),onMouseover:l=>j.value=t.id,onMouseout:n[8]||(n[8]=l=>j.value=0)},"\u56DE\u590D",42,cs))])]),e("div",ms,[e("span",{class:U({highlightComment:o(F)==t.id})},p(t.context),3)]),(h(!0),D(z,null,Y(t.lowerComments,l=>(h(),D("div",{class:"comment-info-detail-child",key:l.id},[i(P,{size:36,src:l.photo,onClick:I=>q(l.uid)},null,8,["src","onClick"]),e("div",vs,[e("div",_s,[e("div",null,[e("span",{class:"comment-info-username",onClick:I=>q(l.uid)},p(l.username),9,fs),e("span",ps,p(o(de)(t.created_at).format("YYYY/MM/DD   HH:mm")),1),l.comment_user_id!=t.uid?(h(),D("span",hs,[gs,e("span",Fs,p(l.comment_user_name),1),Cs,e("span",ys,p(l.comment_id_content),1)])):le("",!0)]),e("div",bs,[(h(),D("span",{key:l.id,onClick:I=>he(l.id,l.username),class:U({highlight:j.value===l.id}),onMouseover:I=>j.value=l.id,onMouseout:n[9]||(n[9]=I=>j.value=0)}," \u56DE\u590D ",42,Ds))])]),e("div",Bs,[e("span",{class:U({highlightComment:o(F)==l.id})},p(l.context),3)])])]))),128))])]),ks]))),128))])]),i(ae,{modelValue:o(y).show,"onUpdate:modelValue":n[10]||(n[10]=t=>o(y).show=t),title:`\u56DE\u590D${pe.value}\u7684\u8BC4\u8BBA`},{default:C(()=>{var t,l;return[i(oo,{videoID:(l=(t=o(s))==null?void 0:t.videoInfo)==null?void 0:l.id,onUpdateVideoInfo:ge,commentsID:o(y).commentsID},null,8,["videoID","commentsID"])]}),_:1},8,["modelValue","title"])])]),e("div",Es,[e("div",Is,[e("div",ws,[e("div",{class:"avatar",onClick:n[11]||(n[11]=t=>{var l,I,J;return q((J=(I=(l=o(s))==null?void 0:l.videoInfo)==null?void 0:I.creatorInfo)==null?void 0:J.id)})},[i(P,{size:60,src:(Pe=(Me=(Le=o(s))==null?void 0:Le.videoInfo)==null?void 0:Me.creatorInfo)==null?void 0:Pe.avatar},null,8,["src"])])]),e("div",As,[e("div",$s,[e("span",{onClick:n[12]||(n[12]=t=>{var l,I;return q((I=(l=o(s))==null?void 0:l.videoInfo)==null?void 0:I.creatorInfo.id)})},p((Oe=(Ue=(qe=o(s))==null?void 0:qe.videoInfo)==null?void 0:Ue.creatorInfo)==null?void 0:Oe.username),1),e("div",{class:"private-letter",onClick:n[13]||(n[13]=t=>{var l,I;return o(Xo)((I=(l=o(s))==null?void 0:l.videoInfo)==null?void 0:I.uid)}),style:{cursor:"pointer"}},[i(x,{name:"message",class:"icon",color:"#9499A0"}),w(" \u79C1\u4FE1 ")])]),e("div",Ss,[i(o(H),{text:(je=(Re=(ze=o(s))==null?void 0:ze.videoInfo)==null?void 0:Re.creatorInfo)!=null&&je.signature?o(s).videoInfo.creatorInfo.signature:"\u8FD9\u4E2A\u4EBA\u5F88\u61D2\uFF0C\u4EC0\u4E48\u90FD\u6CA1\u7559\u4E0B"},{ellipsisNode:C(()=>[Vs]),_:1},8,["text"])]),e("div",xs,[A((h(),O(L,{type:"primary",size:"small",round:"",icon:o(xo),onClick:n[14]||(n[14]=t=>{var l,I,J;return q((J=(I=(l=o(s))==null?void 0:l.videoInfo)==null?void 0:I.creatorInfo)==null?void 0:J.id)})},{default:C(()=>[w("\u4E3B\u9875 ")]),_:1},8,["icon"])),[[o(M)]]),(We=(He=(Ye=o(s))==null?void 0:Ye.videoInfo)==null?void 0:He.creatorInfo)!=null&&We.is_attention?le("",!0):A((h(),O(L,{key:0,class:"attention",type:"primary",size:"small",round:"",icon:o(no),onClick:n[15]||(n[15]=t=>Fe())},{default:C(()=>[w("\u5173\u6CE8 ")]),_:1},8,["icon"])),[[o(M)]]),(Xe=(Ge=(Je=o(s))==null?void 0:Je.videoInfo)==null?void 0:Ge.creatorInfo)!=null&&Xe.is_attention?A((h(),O(L,{key:1,class:"attention",type:"primary",size:"small",round:"",icon:o(To),color:"#F1F2F3",onClick:n[16]||(n[16]=t=>Fe())},{default:C(()=>[w("\u5DF2\u5173\u6CE8 ")]),_:1},8,["icon"])),[[o(M)]]):le("",!0)])])]),e("div",Ts,[e("div",Ns,[e("div",Ls,[Ms,i(x,{name:"dropDown",class:"icon",color:"#61666D"})]),e("span",{onClick:n[17]||(n[17]=t=>V.value=!o(V))},[i(x,{name:"rightArrow",class:"arrow",color:"#61666D"})])]),e("div",{class:"barrage-list",style:io({height:o(V)?"700px":"0px"})},[i(Ce,{data:o(s).barrageList,style:{width:"100%"}},{default:C(()=>[i(ee,{prop:"time",label:"\u65F6\u95F4",width:"90"},{default:C(t=>[e("span",null,p(o(uo)(t.row.time)),1)]),_:1}),i(ee,{prop:"text",label:"\u5F39\u5E55\u5185\u5BB9",width:"260"},{default:C(t=>[i(o(H),{text:t.row.text},{ellipsisNode:C(()=>[Ps]),_:2},1032,["text"])]),_:1}),i(ee,{prop:"sendTime",label:"\u53D1\u9001\u65F6\u95F4"},{default:C(t=>[e("span",null,p(o(de)(o(eo)(t.row.sendTime)).format("MM-DD HH:mm")),1)]),_:1})]),_:1},8,["data"])],4),e("div",qs,[(h(!0),D(z,null,Y((Ke=o(s))==null?void 0:Ke.recommendList,t=>(h(),D("div",{class:"video-item",key:t.id},[i(wt,{id:t.id,title:t.title,username:t.username,video_duration:t.video_duration,"barrage-number":t.barrageNumber,heat:t.heat,cover:t.cover,created_at:t.created_at},null,8,["id","title","username","video_duration","barrage-number","heat","cover","created_at"])]))),128))])])])]),e("div",Us,[e("div",Os,[i(ae,{modelValue:Q.value,"onUpdate:modelValue":n[20]||(n[20]=t=>Q.value=t),title:"\u6536\u85CF\u89C6\u9891",width:"24%",center:"","close-on-click-modal":!0,"append-to-body":!0,"before-close":vo,"align-center":""},{default:C(()=>[i(ct,{onShutDown:mo,onSuccess:n[18]||(n[18]=t=>o(s).videoInfo.is_collect=!0),onCancelCollect:n[19]||(n[19]=t=>o(s).videoInfo.is_collect=!1),id:o(c)},null,8,["id"])]),_:1},8,["modelValue"])])])])}}});const hn=X(zs,[["__scopeId","data-v-dca8f5d4"]]);export{hn as default};
