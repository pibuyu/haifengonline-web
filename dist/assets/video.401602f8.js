import{af as q,r as p,aU as z,k as G,S as d,H as m,d as H,M as J,E as U,J as W,a2 as j,A as K,a6 as O,c as h,b as l,i as _,u as i,F as P,e as Q,v as C,g as s,C as X,D as Y,a as g,q as Z,G as E,t as b,aQ as ee,aW as oe,_ as te,l as se}from"./index.0228ac47.js";import"./el-infinite-scroll.3c533531.js";/* empty css                 *//* empty css                  *//* empty css                        */import{_ as ne}from"./pageHeader.3132b316.js";import{h as ae,i as ie}from"./contribution.36ea1e3c.js";import{u as ce}from"./creation.6bf1bcd7.js";import{v as T}from"./focus.de63bc5a.js";import{y as k}from"./vue-ellipsis-3.es.74e51318.js";import"./index.f22c08f3.js";const le=()=>{const e=q().globalData.loading,a=ce(),n=z(),o=G(),t=p([]),r=p({page:1,size:8}),B=p(!0),v=p(!1),f=p(!1);return{videoList:t,isLoading:B,route:n,router:o,pageInfo:r,loading:e,isLoadMore:v,isTheEnd:f,editVideoStore:a}},ue=(e,a)=>{a.push({name:"VideoShow",params:{id:e.id}})},re=async(e,a)=>{try{d.fire({heightAuto:!1,title:"\u786E\u8BA4\u5220\u9664\u8BE5\u89C6\u9891\u561B",icon:"warning",confirmButtonColor:m.colorButtonTheme,showCancelButton:!0,confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",reverseButtons:!0}).then(async n=>{if(n.isConfirmed)try{await ie({id:a}),d.fire({title:"\u5220\u9664\u6210\u529F",confirmButtonColor:m.colorButtonTheme,heightAuto:!1,icon:"success"}),e.value=e.value.filter(o=>(o.id==a&&(o.is_delete=!0),o)),setTimeout(()=>{e.value=e.value.filter(o=>o.id!=a)},400)}catch(o){console.log(o),d.fire({title:"\u5220\u9664\u5931\u8D25",heightAuto:!1,confirmButtonColor:m.colorButtonTheme,icon:"error"})}else n.dismiss===d.DismissReason.cancel&&console.log("\u53D6\u6D88")})}catch{d.fire({title:"\u5220\u9664\u5931\u8D25",heightAuto:!1,confirmButtonColor:m.colorButtonTheme,icon:"error"})}},de=async(e,a,n,o)=>{try{n.setEditVideoData({videoID:e.id,cover:e.cover,reprinted:e.reprinted,cover_url:e.cover_url,coverUploadType:e.cover_upload_type,title:e.title,label:e.label,introduce:e.introduce,videoDuration:e.video_duration}),o.push({name:"Contribute",query:{type:"editVideo"}})}catch{d.fire({title:"\u7F16\u8F91\u5931\u8D25",heightAuto:!1,confirmButtonColor:m.colorButtonTheme,icon:"error"})}},V=async(e,a,n,o)=>{try{const t=await ae({page_info:n.value});if(console.log("\u83B7\u53D6\u89C6\u9891\u7A3F\u4EF6\u7684\u8FD4\u56DE\u7ED3\u679C\u4E3A",t.data),n.value.page++,!t.data)return!1;t.data.length==0&&(o.value=!0),t.data=t.data.filter(r=>(r.is_delete=!1,r)),e.value=[...e.value,...t.data],console.log(e),a.value=!1}catch(t){console.log(t),d.fire({title:"\u83B7\u53D6\u89C6\u9891\u7A3F\u4EF6\u5931\u8D25",heightAuto:!1,confirmButtonColor:m.colorButtonTheme,icon:"error"})}},_e=e=>(X("data-v-4cc1b23c"),e=e(),Y(),e),me={class:"overall"},ve={class:"content"},fe={class:"video-list","infinite-scroll-delay":1e3,"infinite-scroll-immediate":!1},pe={class:"video-item"},he=["onClick"],ge={class:"item-right"},Be={class:"data"},ye=["onClick"],De={class:"item-info"},Ce={class:"icon-item"},Ee={class:"icon-item"},be={class:"icon-item"},Fe={class:"function"},Se={class:"record-empty"},Ae={class:"load-more"},Te=_e(()=>s("div",{class:"spread-bottom"},null,-1)),ke=H({__name:"video",setup(e){k;const{route:a,router:n,videoList:o,isLoading:t,pageInfo:r,loading:B,isLoadMore:v,isTheEnd:f,editVideoStore:w}=le(),x=u=>{re(o,u)},F=u=>{ue(u,n)},I=u=>{de(u,B,w,n)},L=async()=>{if(f.value||(v.value=!0,o.value.length<=0))return!1;V(o,t,r,f),v.value=!1};return J(()=>a.path,async()=>{o.value=[],t.value=!0,V(o,t,r,f);for(let u in o)console.log(u)},{immediate:!0,deep:!0}),(u,Ve)=>{const R=ne,N=U,y=te,S=W,$=j,M=K,A=O;return g(),h("div",me,[l(R,{title:"\u89C6\u9891\u7A3F\u4EF6","icon-nmae":"video",animate:!1,whiteWhale:!1}),_((g(),h("div",ve,[_((g(),h("div",fe,[(g(!0),h(P,null,Q(i(o),(c,we)=>(g(),h("div",{class:Z({animate__animated:!0,animate__fadeOutLeftBig:c.is_delete}),key:c.id,placement:"top"},[s("div",pe,[s("div",{class:"item-left",onClick:D=>F(c)},[l(N,{class:"item-img",src:c.cover,fit:"cover"},null,8,["src"])],8,he),s("div",ge,[s("div",Be,[s("div",{class:"item-title",onClick:D=>F(c)},[l(i(k),{visibleLine:1,text:c.title},null,8,["text"])],8,ye),s("div",De,[s("div",Ce,[l(y,{name:"video",class:"icon",color:"000"}),E(),s("span",null,b(c.heat),1)]),s("div",Ee,[l(y,{name:"barrageNumber",class:"icon",color:"000"}),E(),s("span",null,b(c.barrageNumber),1)]),s("div",be,[l(y,{name:"comment",class:"icon-max",color:"000"}),E(),s("span",null,b(c.comments_number),1)])])]),s("div",Fe,[_(l(S,{type:"primary",icon:i(ee),circle:"",onClick:D=>I(c)},null,8,["icon","onClick"]),[[i(T)]]),_(l(S,{type:"info",icon:i(oe),onClick:D=>x(c.id),circle:""},null,8,["icon","onClick"]),[[i(T)]])])])])],2))),128))])),[[C,i(o).length>0],[M,L]]),_(s("div",Se,[l($,{description:"\u8FD8\u672A\u53D1\u5E03\u89C6\u9891,\u5FEB\u53BB\u53D1\u5E03\u5427~"})],512),[[C,i(o).length==0&&i(t)==!1]]),_(s("div",Ae,null,512),[[C,i(o).length>0&&i(v)],[A,!0]]),Te])),[[A,i(t)]])])}}});const Je=se(ke,[["__scopeId","data-v-4cc1b23c"]]);export{Je as default};
